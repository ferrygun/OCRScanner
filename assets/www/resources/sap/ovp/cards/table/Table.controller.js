(function(){"use strict";jQuery.sap.require("sap.ovp.cards.CommonUtils");sap.ui.controller("sap.ovp.cards.table.Table",{onInit:function(){},onColumnListItemPress:function(e){if(sap.ovp.cards.CommonUtils.checkIfAPIIsUsed(this)){sap.ovp.cards.CommonUtils.onContentClicked(e);}else{var n=this.getEntityNavigationEntries(e.getSource().getBindingContext(),this.getCardPropertiesModel().getProperty("/annotationPath"));this.doNavigation(e.getSource().getBindingContext(),n[0]);}},onContactDetailsLinkPress:function(e){var p;p=e.getSource().getParent().getAggregation("items")[0];p.bindElement(e.getSource().getBindingContext().getPath());p.openBy(e.getSource());},getCardItemsBinding:function(){var t=this.getView().byId("ovpTable");return t.getBinding("items");},onAfterRendering:function(){var c=this.getOwnerComponent().getComponentData();var C=this.getCardPropertiesModel();if(C.getProperty("/layoutDetail")==="resizable"){var d=this.getDashboardLayoutUtil();var o=d.dashboardLayoutModel.getCardById(c.cardId);var h=this.getHeaderHeight();var s=d.getCardDomId(c.cardId);var e=document.getElementById(s);if(!o.dashboardLayout.autoSpan){e.getElementsByClassName('sapOvpWrapper')[0].style.height=((o.dashboardLayout.rowSpan*d.ROW_HEIGHT_PX)+1-(h+2*d.CARD_BORDER_PX))+"px"}if(o.dashboardLayout.showOnlyHeader){e.classList.add("sapOvpMinHeightContainer");}this.addColumnInTable(jQuery(e),{colSpan:o.dashboardLayout.colSpan});}else{var t=this.getView().byId("ovpTable");var a=t.getAggregation("columns");for(var i=0;i<3;i++){if(a[i]){a[i].setStyleClass("sapTableColumnShow").setVisible(true);}}}},getCardItemBindingInfo:function(){var l=this.getView().byId("ovpTable");return l.getBindingInfo("items");},addColumnInTable:function($,c){if(c.colSpan>=1){if(jQuery($).find("tr").length!=0){var t=sap.ui.getCore().byId(jQuery($).find(".sapMList").attr("id"));var a=t.getAggregation("columns");var C=c.colSpan;var I=C+1;for(var i=0;i<6;i++){if(a[i]){if(i<=I){a[i].setStyleClass("sapTableColumnShow").setVisible(true);}else{a[i].setStyleClass("sapTableColumnHide").setVisible(false);}}}}}},resizeCard:function(n,c){var N,a,h,a;try{var C=this.getOwnerComponent().getComponentData(),$=document.getElementById(this.getDashboardLayoutUtil().getCardDomId(C.cardId)),b=this.getCardItemBindingInfo(),H=this.getHeaderHeight(),o=this.getView().byId('ovpCardContentContainer').getDomRef();if(n.showOnlyHeader){o.classList.add('sapOvpContentHidden');N=0;}else{o.classList.remove('sapOvpContentHidden');h=H+c.dropDownHeight+2*n.iCardBorderPx;a=(n.rowSpan*n.iRowHeightPx)-h-c.itemHeight;N=Math.abs(Math.floor(a/c.itemHeight));$.style.height=n.rowSpan*n.iRowHeightPx+'px';}o.style.height=(n.rowSpan*n.iRowHeightPx)-(H+2*n.iCardBorderPx)+"px";this.addColumnInTable(this.getView().$(),n);if(N!==b.length){b.length=N;n.noOfItems=b.length;this.getCardItemsBinding().refresh();}}catch(e){jQuery.sap.log.warning("OVP resize: "+C.cardId+" catch "+e.toString());}}});})();
